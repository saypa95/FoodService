(()=>{"use strict";function e(e,t){document.querySelector(e).classList.toggle("show"),document.body.classList.toggle("overflowHide"),t&&clearInterval(t)}window.addEventListener("DOMContentLoaded",(()=>{const t=setTimeout((()=>e(".modal",t)),15e3);(function(e,t,s,o){const c=document.querySelectorAll(e),n=document.querySelector(t),r=document.querySelectorAll(s);function a(){r.forEach((e=>{e.classList.add("hide"),e.classList.remove("show","fade")})),c.forEach((e=>{e.classList.remove(o)}))}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r[e].classList.add("show","fade"),r[e].classList.remove("hide"),c[e].classList.add(o)}n.addEventListener("click",(t=>{const s=t.target;s&&s.classList.contains(e.slice(1))&&c.forEach(((e,t)=>{e==s&&(a(),l(t))}))})),a(),l()})(".tabheader__item",".tabheader__items",".tabcontent","tabheader__item_active"),function(t,s){const o=document.querySelector(t);document.addEventListener("click",(c=>{null==c.target.dataset.modal&&null==c.target.dataset.close&&c.target!=o||e(t,s)})),document.addEventListener("keydown",(c=>{"Escape"===c.code&&o.classList.contains("show")&&e(t,s)})),window.addEventListener("scroll",(function o(){window.scrollY+document.documentElement.clientHeight>=document.documentElement.scrollHeight-1&&(e(t,s),removeEventListener("scroll",o))}))}(".modal",t),function(e,t){const s=document.querySelector(e),o=s.querySelector("#days"),c=s.querySelector("#hours"),n=s.querySelector("#minutes"),r=s.querySelector("#seconds"),a=setInterval(l,1e3);function l(){const e=function(e){let t,s,o,c;const n=Date.parse(e)-Date.parse(new Date);return n<=0?t=s=o=c=0:(t=Math.floor(n/864e5),s=Math.floor(n/36e5%24),o=Math.floor(n/6e4%60),c=Math.floor(n/1e3%60)),{total:n,days:t,hours:s,minutes:o,seconds:c}}(t);o.innerHTML=`0${e.days}`.slice(-2),c.innerHTML=`0${e.hours}`.slice(-2),n.innerHTML=`0${e.minutes}`.slice(-2),r.innerHTML=`0${e.seconds}`.slice(-2),e.total<=0&&clearInterval(a)}l()}(".timer","2022-10-01"),function(){class e{constructor(e,t,s,o,c,n){this.src=e,this.alt=t,this.title=s,this.descr=o,this.price=c;for(var r=arguments.length,a=new Array(r>6?r-6:0),l=6;l<r;l++)a[l-6]=arguments[l];this.classes=a.length?a:["menu__item"],this.parent=document.querySelector(n),this.rate=65,this.convertToRUB()}convertToRUB(){this.price*=this.rate}render(){const e=document.createElement("div");e.classList.add(...this.classes),e.innerHTML=`\n        <img src=${this.src} alt=${this.alt} />\n        <h3 class="menu__item-subtitle">${this.title}</h3>\n        <div class="menu__item-descr">${this.descr}</div>\n        <div class="menu__item-divider"></div>\n        <div class="menu__item-price">\n          <div class="menu__item-cost">Цена:</div>\n          <div class="menu__item-total"><span>${this.price}</span> руб/день</div>\n        </div>\n      `,this.parent.append(e)}}(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status: ${t.status}`);return await t.json()})("http://localhost:3000/menu").then((t=>{t.forEach((t=>{let{img:s,alt:o,title:c,descr:n,price:r}=t;new e(s,o,c,n,r,".menu .container").render()}))}))}(),function(){const e=document.querySelector(".calculating__result span");let t,s,o,c=localStorage.getItem("gender")||"female",n=+localStorage.getItem("ratio")||1.375;function r(){e.textContent=c&&t&&s&&o&&n?"female"==c?Math.round((447.6+9.2*s+3.1*t-4.3*o)*n):Math.round((88.36+13.4*s+4.8*t-5.7*o)*n):"_____ "}function a(e){e.target.classList.contains("calculating__choose-item")&&(e.target.dataset.ratio?(n=+e.target.dataset.ratio,localStorage.setItem("ratio",+e.target.dataset.ratio)):(c=e.target.getAttribute("id"),localStorage.setItem("gender",e.target.getAttribute("id"))),e.currentTarget.querySelectorAll("div").forEach((e=>{e.classList.remove("calculating__choose-item_active")})),e.target.classList.add("calculating__choose-item_active"),r())}document.querySelectorAll(".calculating__choose div").forEach((e=>{e.getAttribute("id")==c||e.dataset.ratio==n?e.classList.add("calculating__choose-item_active"):e.classList.remove("calculating__choose-item_active")})),r(),document.querySelector("#gender").addEventListener("click",a),document.querySelector(".calculating__choose_big").addEventListener("click",a),document.querySelector(".calculating__choose_medium").addEventListener("input",(function(e){if(e.target.classList.contains("calculating__choose-item")){switch(e.target.value.match(/\D/g)?e.target.style.border="1px solid red":e.target.style.border="none",e.target.getAttribute("id")){case"height":t=+e.target.value;break;case"weight":s=+e.target.value;break;case"age":o=+e.target.value}r()}}))}(),function(t,s){document.querySelectorAll(t).forEach((e=>{var t;(t=e).addEventListener("submit",(e=>{e.preventDefault();const s=document.createElement("img");s.src=o,s.style.cssText="\n      display: block;\n      margin: 0 auto;\n      ",t.insertAdjacentElement("afterend",s);const a=new FormData(t);(async(e,t)=>{const s=await fetch("http://localhost:3000/requests",{method:"POST",headers:{"Content-type":"application/json"},body:t});return await s.json()})(0,JSON.stringify(Object.fromEntries(a.entries()))).then((e=>{console.log(e),r(c),s.remove()})).catch((()=>{r(n)})).finally((()=>{t.reset()}))}))}));const o="img/form/spinner.svg",c="Спасибо! Скоро мы с вами свяжемся!",n="Что-то пошло не так...";function r(t){const o=document.querySelector(".modal__content");o.classList.add("hide"),document.querySelector(".modal").classList.contains("show")||e(".modal",s);const c=document.createElement("div");c.classList.add("modal__content"),c.innerHTML=`<div data-close class="modal__close">&times;</div> <div class="modal__title">${t}</div>`,document.querySelector(".modal__dialog").append(c),setTimeout((()=>{c.remove(),o.classList.remove("hide"),o.classList.add("show"),document.querySelector(".modal").classList.contains("show")&&e(".modal",s)}),4e3)}}("form",t),function(e){let{sliderSelector:t,slideSelector:s,btnPrevSlideSelector:o,btnNextSlideSelector:c,sliderWrapperSelector:n,slidesFieldSelector:r}=e;const a=document.querySelectorAll(s),l=document.querySelector(t),i=document.querySelector(o),d=document.querySelector(c),u=document.querySelector(n),m=document.querySelector(r),h=window.getComputedStyle(u).width;let g=1,_=0;function v(){m.style.transform=`translateX(-${_}px)`,document.querySelector("#current").textContent=`0${g}`.slice(-2),S.forEach((e=>{e.dataset.slideTo==g?e.classList.add("dot-active"):e.classList.toggle("dot-active",!1)}))}document.querySelector("#total").textContent=`0${a.length}`.slice(-2),document.querySelector("#current").textContent=`0${g}`.slice(-2),m.style.cssText=`width: ${100*a.length+"%"}; \n    display: flex; \n    transition: 0.5s all`,u.style.overflow="hidden",a.forEach((e=>{e.style.width=h})),d.addEventListener("click",(()=>{_==Number.parseInt(h)*(a.length-1)?(_=0,g=1):(_+=Number.parseInt(h),g++),v()})),i.addEventListener("click",(()=>{0==_?(_=Number.parseInt(h)*(a.length-1),g=a.length):(_-=Number.parseInt(h),g--),v()}));const f=document.createElement("ol");f.classList.add("carousel-indicators");const S=[];for(let e=0;e<a.length;e++){const t=document.createElement("li");t.classList.add("dot"),t.setAttribute("data-slide-to",e+1),t.dataset.slideTo==g&&t.classList.add("dot-active"),f.append(t),S.push(t)}l.append(f),f.addEventListener("click",(e=>{g=e.target.dataset.slideTo,_=Number.parseInt(h)*(g-1),v()}))}({sliderSelector:".offer__slider",slideSelector:".offer__slide",btnPrevSlideSelector:".offer__slider-prev",btnNextSlideSelector:".offer__slider-next",sliderWrapperSelector:".offer__slider-wrapper",slidesFieldSelector:".offer__slider-inner"})}))})();
//# sourceMappingURL=bundle.js.map